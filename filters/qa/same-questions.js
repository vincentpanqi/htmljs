// Generated by CoffeeScript 1.9.3
(function() {
  var func_question, func_tag;

  func_question = __F('question');

  func_tag = __F('tag');

  module.exports = function(req, res, next) {
    var condition, querystring;
    condition = [];
    querystring = '';
    if (!res.locals.question.tagNames) {
      return next();
    } else {
      res.locals.question.tagNames.split(',').forEach(function(tagname, i) {
        if (i !== 0) {
          querystring += " or ";
        }
        querystring += " questions.tagNames like ? ";
        return condition.push("%" + tagname + "%");
      });
      condition.unshift(querystring);
      return func_question.getAll(1, 10, condition, function(error, questions) {
        res.locals.same_questions = questions;
        return next();
      });
    }
  };

}).call(this);
